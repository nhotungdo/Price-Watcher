@page
@model PriceWatcher.Pages.VisualSearchModel
@{
    ViewData["Title"] = "Visual Search - T√¨m ki·∫øm b·∫±ng h√¨nh ·∫£nh";
}

<link rel="stylesheet" href="~/css/visual-search.css" />

<div class="visual-search-container">
    <div class="header-section">
        <h1>üîç T√¨m ki·∫øm b·∫±ng h√¨nh ·∫£nh</h1>
        <p class="subtitle">K√©o th·∫£ ho·∫∑c t·∫£i l√™n h√¨nh ·∫£nh ƒë·ªÉ t√¨m s·∫£n ph·∫©m t∆∞∆°ng t·ª± tr√™n Shopee, Lazada, Tiki</p>
    </div>

    <!-- Drag & Drop Zone -->
    <div class="upload-section">
        <div id="dropZone" class="drop-zone">
            <div class="drop-zone-content">
                <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <h3>K√©o th·∫£ h√¨nh ·∫£nh v√†o ƒë√¢y</h3>
                <p>ho·∫∑c</p>
                <button type="button" class="btn-browse" id="browseBtn">Ch·ªçn file t·ª´ m√°y t√≠nh</button>
                <input type="file" id="fileInput" accept="image/jpeg,image/jpg,image/png,image/webp" hidden />
                <p class="file-info">H·ªó tr·ª£: JPG, PNG, WebP (t·ªëi ƒëa 10MB)</p>
            </div>
            <div class="drop-zone-overlay" id="dropOverlay">
                <p>Th·∫£ h√¨nh ·∫£nh v√†o ƒë√¢y</p>
            </div>
        </div>

        <!-- Image Preview -->
        <div id="imagePreview" class="image-preview" style="display: none;">
            <div class="preview-header">
                <h4>H√¨nh ·∫£nh ƒë√£ ch·ªçn</h4>
                <button type="button" class="btn-remove" id="removeImageBtn">‚úï</button>
            </div>
            <img id="previewImage" src="" alt="Preview" />
            <button type="button" class="btn-search" id="searchBtn">
                <span class="btn-text">T√¨m ki·∫øm</span>
                <span class="btn-loading" style="display: none;">
                    <span class="spinner"></span> ƒêang t√¨m ki·∫øm...
                </span>
            </button>
        </div>

        <!-- URL Input Option -->
        <div class="url-input-section">
            <div class="divider">
                <span>HO·∫∂C</span>
            </div>
            <div class="url-input-group">
                <input type="url" id="imageUrlInput" class="url-input" placeholder="Nh·∫≠p URL h√¨nh ·∫£nh..." />
                <button type="button" class="btn-search-url" id="searchUrlBtn">T√¨m ki·∫øm</button>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="loading-state" style="display: none;">
        <div class="loading-spinner"></div>
        <p>ƒêang ph√¢n t√≠ch h√¨nh ·∫£nh v√† t√¨m ki·∫øm s·∫£n ph·∫©m...</p>
    </div>

    <!-- Error Message -->
    <div id="errorMessage" class="error-message" style="display: none;">
        <div class="error-content">
            <span class="error-icon">‚ö†Ô∏è</span>
            <span id="errorText"></span>
        </div>
        <button type="button" class="btn-close-error" id="closeErrorBtn">‚úï</button>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="results-section" style="display: none;">
        <div class="results-header">
            <h2>K·∫øt qu·∫£ t√¨m ki·∫øm</h2>
            <p id="resultsCount" class="results-count"></p>
        </div>

        <!-- Platform Filters -->
        <div class="platform-filters">
            <button class="filter-btn active" data-platform="all">T·∫•t c·∫£</button>
            <button class="filter-btn" data-platform="shopee">
                <img src="/images/platforms/shopee-icon.png" alt="Shopee" /> Shopee
            </button>
            <button class="filter-btn" data-platform="tiki">
                <img src="/images/platforms/tiki-icon.png" alt="Tiki" /> Tiki
            </button>
        </div>

        <!-- Results Grid -->
        <div id="resultsGrid" class="results-grid"></div>

        <!-- No Results -->
        <div id="noResults" class="no-results" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h3>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h3>
            <p>Th·ª≠ v·ªõi h√¨nh ·∫£nh kh√°c ho·∫∑c ƒëi·ªÅu ch·ªânh g√≥c ch·ª•p r√µ r√†ng h∆°n</p>
        </div>
    </div>

    <!-- How It Works Section -->
    <div class="how-it-works">
        <h3>C√°ch s·ª≠ d·ª•ng</h3>
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h4>T·∫£i h√¨nh ·∫£nh</h4>
                <p>K√©o th·∫£ ho·∫∑c ch·ªçn h√¨nh ·∫£nh s·∫£n ph·∫©m t·ª´ m√°y t√≠nh</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h4>T√¨m ki·∫øm</h4>
                <p>H·ªá th·ªëng s·∫Ω ph√¢n t√≠ch v√† t√¨m s·∫£n ph·∫©m t∆∞∆°ng t·ª±</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h4>So s√°nh gi√°</h4>
                <p>Xem k·∫øt qu·∫£ t·ª´ Shopee, Lazada, Tiki v√† ch·ªçn gi√° t·ªët nh·∫•t</p>
            </div>
        </div>
    </div>
</div>

<script src="~/js/visual-search.js"></script>
